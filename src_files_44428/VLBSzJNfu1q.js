;/*FB_PKG_DELIM*/

__d("WAWebSupportAIStartChatErrorModalLoadable",["fbt","JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadingConfirmPopup.react","asyncToGeneratorRuntime","react","react-loadable"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");a=c("WAWebLazyLoadedRetriable")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("JSResourceForInteraction")("WAWebSupportAIStartChatErrorModal.react").__setRef("WAWebSupportAIStartChatErrorModalLoadable").load());return a}),"StartAISupportChatErrorModal");d=c("react-loadable")({loader:a,loading:function(a){return j.jsx(c("WAWebLoadingConfirmPopup.react"),{okText:h._("__JHASH__UHaRS5i0jbU__JHASH__"),error:Boolean(a.error)})}});g.SupportAIStartChatErrorModalLoadable=d}),226);
__d("WAWebSupportAIStartChatNux.react",["fbt","WAPromiseRaceAbort","WAWebConfirmPopup.react","WAWebFlex.react","WAWebLoggerDebugInfo","WAWebModalManager","WAWebNetworkStatus","WAWebNux","WAWebSendSupportRequestJob","WAWebSpinner.react","WAWebSupportAINux.react","WAWebSupportAIStartChatErrorModalLoadable","WAWebSupportAiSessionWamEvent","WAWebSupportChatConfirmationModal.react","WAWebSupportChatStrings","WAWebSupportChatUtils","WAWebSupportOfflinePopUp.react","WAWebWamEnumSupportAiEventType","asyncToGeneratorRuntime","react","useWAWebDebouncedCallback","useWAWebNux","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useState;function a(a){var e=a.onEmail,f=a.supportTag,g=a.entityId,i=c("useWAWebUnmountSignal")();a=m(!1);var j=a[0],n=a[1];a=c("useWAWebNux")(d("WAWebNux").NUX.SUPPORT_AI);var o=a[0];a[1];var p=function(a,b){new(d("WAWebSupportAiSessionWamEvent").SupportAiSessionWamEvent)({supportAiEventType:d("WAWebWamEnumSupportAiEventType").SUPPORT_AI_EVENT_TYPE.CREATE_SUPPORT_TICKET_ERROR,supportAiErrorCode:b,supportAiErrorMessage:a}).commit(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebSupportAIStartChatErrorModalLoadable").SupportAIStartChatErrorModalLoadable,{onEmail:e}))},q=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){new(d("WAWebSupportAiSessionWamEvent").SupportAiSessionWamEvent)({supportAiEventType:d("WAWebWamEnumSupportAiEventType").SUPPORT_AI_EVENT_TYPE.START_CHAT_CLICKED}).commit();if(!c("WAWebNetworkStatus").online){new(d("WAWebSupportAiSessionWamEvent").SupportAiSessionWamEvent)({supportAiEventType:d("WAWebWamEnumSupportAiEventType").SUPPORT_AI_EVENT_TYPE.NO_INTERNET_DIALOG_SHOWN}).commit();d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebSupportOfflinePopUp.react"),{}));return}n(!0);var a=(yield d("WAWebLoggerDebugInfo").getDebugInfo({supportTag:f,convertFields:!0,addUserAgentDetails:!0,entityId:g}));a.sagaKey="saga_v1_enabled";c("WAPromiseRaceAbort")(d("WAWebSendSupportRequestJob").sendSupportRequest("#chatbot",JSON.stringify(a)),i).then(function(a){if(a.message!=null){new(d("WAWebSupportAiSessionWamEvent").SupportAiSessionWamEvent)({supportAiEventType:d("WAWebWamEnumSupportAiEventType").SUPPORT_AI_EVENT_TYPE.CREATE_SUPPORT_TICKET_SUCCESS}).commit();d("WAWebModalManager").ModalManager.close();var b=a.groupId;b!==void 0&&b.includes("@s.whatsapp.net")?void d("WAWebSupportChatUtils").openSupportChat(b,!0):(new(d("WAWebSupportAiSessionWamEvent").SupportAiSessionWamEvent)({supportAiEventType:d("WAWebWamEnumSupportAiEventType").SUPPORT_AI_EVENT_TYPE.TICKET_CREATION_DIALOG_SHOWN}).commit(),d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebSupportChatConfirmationModal.react"),{})))}else p(a.errorText,a.errorCode),n(!1)})["catch"](function(a){p(a.message,a.code),n(!1)})});return function(){return a.apply(this,arguments)}}(),r=c("useWAWebDebouncedCallback")(function(){return q()},100);l(function(){o||void r()},[]);return o?k.jsx(c("WAWebSupportAINux.react"),{isSending:j,onOK:r,canCancel:!0,okText:d("WAWebSupportChatStrings").SupportChatStartButtonText()}):k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__-hco_aHbgN2__JHASH__"),onCancel:function(){return d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),children:k.jsx(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",children:k.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);