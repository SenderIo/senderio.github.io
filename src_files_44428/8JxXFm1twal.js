;/*FB_PKG_DELIM*/

__d("WASmaxInSupportIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInSupportHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInSupportIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInSupportIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQErrorResponseMixin=a}),98);
__d("WASmaxInSupportIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInSupportIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInSupportIQErrorNoticeRequiredMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","notice-required");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",475);if(!c.success)return c;a=d("WASmaxParseUtils").attrIntRange(a,"tos_version",1,65535);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:c.value,tosVersion:a.value})}g.parseIQErrorNoticeRequiredMixin=a}),98);
__d("WASmaxInSupportIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInSupportIQErrorBadRequestMixin","WASmaxInSupportIQErrorInternalServerErrorMixin","WASmaxInSupportIQErrorNoticeRequiredMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInSupportIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInSupportIQErrorNoticeRequiredMixin").parseIQErrorNoticeRequiredMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorNoticeRequired",value:c.value});var e=d("WASmaxInSupportIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorNoticeRequired","IQErrorInternalServerError"],[b,c,e])}g.parseIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInSupportContactFormResponseError",["WAResultOrError","WASmaxInSupportHackBaseIQErrorResponseMixin","WASmaxInSupportIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInSupportHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInSupportIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup").parseIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup:b.value}))}g.parseContactFormResponseError=a}),98);
__d("WASmaxInSupportIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInSupportHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInSupportIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInSupportIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQResultResponseMixin=a}),98);
__d("WASmaxInSupportContactFormResponseRetryableError",["WAResultOrError","WASmaxInSupportHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"response");if(!c.success)return c;var e=d("WASmaxParseUtils").attrInt(c.value,"error_code");if(!e.success)return e;c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"next_retry_ts");if(!c.success)return c;a=d("WASmaxInSupportHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({responseErrorCode:e.value,responseNextRetryTs:c.value},a.value))}g.parseContactFormResponseRetryableError=a}),98);
__d("WASmaxInSupportContactFormResponseSuccess",["WAResultOrError","WASmaxInSupportHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"response");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"message");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"ticket_id");if(!f.success)return f;var g=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"group_jid");if(!g.success)return g;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"status","ok");if(!c.success)return c;e=d("WASmaxParseUtils").contentString(e.value);if(!e.success)return e;f=d("WASmaxParseUtils").contentString(f.value);if(!f.success)return f;g=d("WASmaxParseUtils").contentString(g.value);if(!g.success)return g;a=d("WASmaxInSupportHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({responseStatus:c.value,responseMessageElementValue:e.value,responseTicketIdElementValue:f.value,responseGroupJidElementValue:g.value},a.value))}g.parseContactFormResponseSuccess=a}),98);
__d("WASmaxOutSupportBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutSupportHackBaseIQSetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutSupportBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqFrom;a=d("WASmaxOutSupportBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{from:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),to:d("WAWap").S_WHATSAPP_NET}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHackBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutSupportContactFormRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutSupportHackBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.topicElementValue;a=d("WASmaxJsx").smax("topic",null,a);return a}function i(a){a=a.topicIdElementValue;a=d("WASmaxJsx").smax("topic_id",null,a);return a}function j(a){a=a.debugInformationJsonElementValue;a=d("WASmaxJsx").smax("debug_information_json",null,a);return a}function k(a){a=a.uploadedLogsIdElementValue;a=d("WASmaxJsx").smax("uploaded_logs_id",null,a);return a}function l(a){a=a.additionalAttributesContextFlow;a=d("WASmaxJsx").smax("additional_attributes",{context_flow:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)});return a}function a(a){var b=a.topicArgs,c=a.topicIdArgs,e=a.debugInformationJsonArgs,f=a.uploadedLogsIdArgs,g=a.additionalAttributesArgs,m=a.descriptionElementValue;b=d("WASmaxOutSupportHackBaseIQSetRequestMixin").mergeHackBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:d("WAWap").INT(3)},d("WASmaxJsx").smax("description",null,m),(m=d("WASmaxChildren")).OPTIONAL_CHILD(h,b),m.OPTIONAL_CHILD(i,c),m.OPTIONAL_CHILD(j,e),m.OPTIONAL_CHILD(k,f),m.OPTIONAL_CHILD(l,g)),a);return b}g.makeContactFormRequestTopic=h;g.makeContactFormRequestTopicId=i;g.makeContactFormRequestDebugInformationJson=j;g.makeContactFormRequestUploadedLogsId=k;g.makeContactFormRequestAdditionalAttributes=l;g.makeContactFormRequest=a}),98);
__d("WASmaxSupportContactFormRPC",["WAComms","WASmaxInSupportContactFormResponseError","WASmaxInSupportContactFormResponseRetryableError","WASmaxInSupportContactFormResponseSuccess","WASmaxOutSupportContactFormRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutSupportContactFormRequest").makeContactFormRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInSupportContactFormResponseSuccess").parseContactFormResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"ContactFormResponseSuccess",value:g.value});case 7:h=d("WASmaxInSupportContactFormResponseRetryableError").parseContactFormResponseRetryableError(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"ContactFormResponseRetryableError",value:h.value});case 10:i=d("WASmaxInSupportContactFormResponseError").parseContactFormResponseError(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"ContactFormResponseError",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ContactForm",{Success:g,RetryableError:h,Error:i}));case 14:case"end":return j.stop()}},null,this)}g.sendContactFormRPC=a}),98);
__d("WAWebSendSupportRequestJob",["WALogger","WASmaxSupportContactFormRPC","WAWebCrashlog","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["InAppSupport: Logs upload complete for ticketId=",", logsId=",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["InAppSupport: Logs upload failed for ticketId=",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["InAppSupport: Uploading logs for ticketId=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["supportRequest error: code="," message=",""]);k=function(){return a};return a}var l=864e5;function m(a,b){d("WALogger").WARN(k(),a,(a=b)!=null?a:"").sendLogs("supportRequest")}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a={iqFrom:d("WAWebWidToJid").widToUserJid(d("WAWebUserPrefsMeUser").getMeUser()),descriptionElementValue:a,debugInformationJsonArgs:{debugInformationJsonElementValue:b}};a=(yield d("WASmaxSupportContactFormRPC").sendContactFormRPC(a));switch(a.name){case"ContactFormResponseError":var c=a.value.errorIQErrorBadRequestOrNoticeRequiredOrInternalServerErrorMixinGroup.value,e=c.code;c=c.text;m(Number(e),c);return{type:"error",errorCode:Number(e),errorText:c};case"ContactFormResponseRetryableError":e=a.value.responseErrorCode;m(Number(e));return{type:"error",errorCode:Number(e),errorText:"retryable error"};case"ContactFormResponseSuccess":c=a.value.responseMessageElementValue;var f=a.value.responseTicketIdElementValue;e=a.value.responseGroupJidElementValue;if(b!=null&&f!=="no_ticket_created"){d("WALogger").LOG(j(),f);a={reason:d("WAWebCrashlog").USER_REPORT,immediate:!0,isHighPri:!0,logType:d("WAWebCrashlog").LogType.SUPPORT,ticketId:f,fromTimestamp:Date.now()-l};void d("WAWebCrashlog").upload(a).then(function(a){a==null?d("WALogger").LOG(i(),f):d("WALogger").LOG(h(),f,a)})}return{type:"success",message:c,ticketId:f,groupId:e}}});return n.apply(this,arguments)}g.sendSupportRequest=a}),98);
__d("WAWebContactUsModal.react",["fbt","WAAbortError","WALogger","WAPromiseRaceAbort","WAWebABPropsSaga","WAWebClickableLink.react","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebFlexItem.react","WAWebKeyboardHotKeys.react","WAWebLoggerDebugInfo","WAWebMobilePlatforms","WAWebModalManager","WAWebRichTextField.react","WAWebSendSupportRequestJob","WAWebSupportChatConfirmationModal.react","WAWebSupportChatStrings","WAWebSupportChatUtils","asyncToGeneratorRuntime","react","useWAWebDebouncedCallback","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["InAppSupport: Sending support request with deviceInfo=",":",""]);k=function(){return a};return a}e=j||d("react");var l=i||(i=c("react")),m=e.useEffect,n=e.useRef,o=e.useState,p=10,q=5e3,r={deviceInfo:{marginBottom:"xod5an3",marginTop:"x1anpbxc",$$css:!0},emailLink:{marginTop:"x1anpbxc",$$css:!0}};function a(a){var e=a.supportTag,f=a.onSend,g=a.onFailure,i=a.onCancel,j=a.onEmail,t=a.entityId,u=c("useWAWebUnmountSignal")();a=o("");var v=a[0],w=a[1];a=o(null);var x=a[0],y=a[1];a=o(!1);var z=a[0],A=a[1];a=o(!1);var B=a[0],C=a[1],D=n(null);m(function(){var a;(a=D.current)==null?void 0:a.restoreFocus();C(d("WAWebABPropsSaga").getIsSagaCopyEnabled())},[]);var E=function(a){return a.length>=p},F=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){A(!0);var a=E(v);if(a){var b;f==null?void 0:f({description:v});var e=d("WAWebABPropsSaga").getIsSagaEnabled();a=(yield I(e));a=JSON.stringify(a);d("WALogger").LOG(k(),!0,(b=a)!=null?b:"n/a");c("WAPromiseRaceAbort")(d("WAWebSendSupportRequestJob").sendSupportRequest(v,a),u).then(function(a){if(a.message!=null){d("WAWebModalManager").ModalManager.close();a=a.groupId;a!==void 0&&a.includes("@s.whatsapp.net")?void d("WAWebSupportChatUtils").openSupportChat(a,e):d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebSupportChatConfirmationModal.react"),{}))}else g&&(g({description:v}),A(!1))})["catch"](d("WAAbortError").catchAbort(function(){A(!1)}))}else y(h._("__JHASH___eUeaUfWHur__JHASH__"))});return function(){return a.apply(this,arguments)}}();a=c("useWAWebDebouncedCallback")(function(){return F()},100);var G=function(){i==null?void 0:i(),d("WAWebModalManager").ModalManager.close()},H=function(){j&&(d("WAWebModalManager").ModalManager.close(),j({description:v}))},I=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebLoggerDebugInfo").getDebugInfo({supportTag:e,convertFields:!0,addUserAgentDetails:!0,entityId:t})),c="";a&&(c="saga");c&&(b.sagaKey=c);b.saga_copy=B;return b});return function(b){return a.apply(this,arguments)}}(),J=function(a){a=a.text;w(a)},K=function(a){a.stopPropagation()},L={enter:K};z&&(L.esc=K);K=h._("__JHASH__hl2p_QwZCP5__JHASH__");return l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__yIAGJzePpd2__JHASH__"),okDisabled:!E(v)||z,okSpinner:z,okText:h._("__JHASH__PXXSSr3uLbO__JHASH__"),onOK:a,onCancel:z?void 0:G,children:l.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:L,children:l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"stretch",children:[l.jsx(d("WAWebRichTextField.react").RichTextField,{error:x,maxLength:q,onChange:J,placeholder:K,ariaLabel:K,ref:D,value:v,minVisibleLines:2,theme:"contact-us"}),l.jsxs(c("WAWebFlexItem.react"),{xstyle:r.deviceInfo,grow:1,children:[B?s():d("WAWebSupportChatStrings").SupportChatDeviceInfoDisclaimer()," ",l.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getSupportChatFaqUrl(),children:h._("__JHASH__RR1bpeluTQm__JHASH__")})]}),l.jsx(d("WAWebFlex.react").FlexRow,{children:l.jsx(c("WAWebFlexItem.react"),{xstyle:r.emailLink,grow:1,children:l.jsx(c("WAWebClickableLink.react"),{onClick:H,tabIndex:0,children:h._("__JHASH__NMk1yUqIL6R__JHASH__")})})})]})})})}a.displayName=a.name+" [from "+f.id+"]";function s(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebSupportChatStrings").SupportChatDeviceInfoAISmbDisclaimer():d("WAWebSupportChatStrings").SupportChatDeviceInfoAIDisclaimer()}g["default"]=a}),226);