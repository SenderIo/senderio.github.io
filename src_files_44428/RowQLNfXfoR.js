;/*FB_PKG_DELIM*/

__d("WASmaxInBugReportingIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBugReportingHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBugReportingIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBugReportingIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQErrorResponseMixin=a}),98);
__d("WASmaxInBugReportingIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBugReportingIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBugReportingIQErrorBadRequestOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInBugReportingIQErrorBadRequestMixin","WASmaxInBugReportingIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBugReportingIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBugReportingIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorInternalServerError"],[b,c])}g.parseIQErrorBadRequestOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInBugReportingReportBugResponseError",["WAResultOrError","WASmaxInBugReportingHackBaseIQErrorResponseMixin","WASmaxInBugReportingIQErrorBadRequestOrInternalServerErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBugReportingHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBugReportingIQErrorBadRequestOrInternalServerErrorMixinGroup").parseIQErrorBadRequestOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrInternalServerErrorMixinGroup:b.value}))}g.parseReportBugResponseError=a}),98);
__d("WASmaxInBugReportingIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBugReportingHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBugReportingIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBugReportingIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQResultResponseMixin=a}),98);
__d("WASmaxInBugReportingReportBugResponseSuccess",["WAResultOrError","WASmaxInBugReportingHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"task_id");if(!c.success)return c;c=d("WASmaxParseUtils").contentString(c.value);if(!c.success)return c;a=d("WASmaxInBugReportingHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({taskIdElementValue:c.value},a.value))}g.parseReportBugResponseSuccess=a}),98);
__d("WASmaxOutBugReportingBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutBugReportingHackBaseIQSetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBugReportingBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqFrom;a=d("WASmaxOutBugReportingBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{from:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),to:d("WAWap").S_WHATSAPP_NET}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHackBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutBugReportingReportBugRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutBugReportingHackBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceLogHandleElementValue;a=d("WASmaxJsx").smax("device_log_handle",null,a);return a}function i(a){var b=a.mediaIv,c=a.mediaCipherKey,e=a.mediaType;a=a.mediaElementValue;b=d("WASmaxJsx").smax("media",{iv:d("WAWap").CUSTOM_STRING(b),cipherKey:d("WAWap").CUSTOM_STRING(c),type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,e)},a);return b}function j(a){a=a.titleElementValue;a=d("WASmaxJsx").smax("title",null,a);return a}function k(a){a=a.categoryElementValue;a=d("WASmaxJsx").smax("category",null,a);return a}function a(a){var b=a.deviceLogHandleArgs,c=a.mediaArgs,e=a.titleArgs,f=a.categoryArgs,g=a.descriptionElementValue,l=a.debugInformationJsonElementValue;l=d("WASmaxOutBugReportingHackBaseIQSetRequestMixin").mergeHackBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:d("WAWap").INT(105)},[d("WASmaxJsx").smax("description",null,g),d("WASmaxJsx").smax("debug_information_json",null,l),(g=d("WASmaxChildren")).OPTIONAL_CHILD(h,b)].concat(g.REPEATED_CHILD(i,c,0,10),[g.OPTIONAL_CHILD(j,e),g.OPTIONAL_CHILD(k,f)])),a);return l}g.makeReportBugRequestDeviceLogHandle=h;g.makeReportBugRequestMedia=i;g.makeReportBugRequestTitle=j;g.makeReportBugRequestCategory=k;g.makeReportBugRequest=a}),98);
__d("WASmaxBugReportingReportBugRPC",["WAComms","WASmaxInBugReportingReportBugResponseError","WASmaxInBugReportingReportBugResponseSuccess","WASmaxOutBugReportingReportBugRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutBugReportingReportBugRequest").makeReportBugRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInBugReportingReportBugResponseSuccess").parseReportBugResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"ReportBugResponseSuccess",value:g.value});case 7:h=d("WASmaxInBugReportingReportBugResponseError").parseReportBugResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"ReportBugResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ReportBug",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendReportBugRPC=a}),98);
__d("WAWebWamEnumBugReportFlowAction",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_INTERNET_CONNECTION_IMPRESSION:1,BUG_REPORT_FORM_IMPRESSION:2,CANCEL_CLICK:3,ADD_SCREENSHOT_CLICK:4,REMOVE_SCREENSHOT_CLICK:5,SUBMIT_CLICK:6,SUCCESS_VIEW_IMPRESSION:7,ERROR_VIEW_IMPRESSION:8,SUBMISSION_FAILED:9,SUBMISSION_SUCCESSFUL:10,DEVICE_LOG_UPLOAD_FAILED:11,DEVICE_LOG_UPLOAD_SUCCESSFUL:12,MEDIA_UPLOAD_FAILED:13,MEDIA_UPLOAD_SUCCESSFUL:14,MEDIA_UPLOAD_RETRY_CLICK:15,SUBMIT_BUG_WITHOUT_FAILED_MEDIA_CLICK:16,SUBMIT_BUG_WITHOUT_FAILED_MEDIA_CANCEL_CLICK:17,SUBMIT_BUG_RETRY_CLICK:18,SUBMIT_BUG_RETRY_VIA_EMAIL_CLICK:19,SUBMIT_BUG_RETRY_CANCEL_CLICK:20,SUBMIT_BUG_CATEGORY_CLICK:21});f.BUG_REPORT_FLOW_ACTION=a}),66);
__d("WAWebBugReportSessionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBugReportFlowAction"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({BugReportSession:[3850,{bugReportErrorMessage:[2,a.TYPES.STRING],bugReportFlowAction:[1,d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION],bugReportMediaCount:[3,a.TYPES.INTEGER],bugReportTaskId:[7,a.TYPES.STRING],submitBugCategory:[6,a.TYPES.STRING],submitBugContainsTitle:[5,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{BugReportSession:[]});g.BugReportSessionWamEvent=b}),98);
__d("WAWebCompression",["JSResourceForInteraction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b===void 0&&(b={});var a=(yield c("JSResourceForInteraction")("WAGzip").__setRef("WAWebCompression").load());return a.createDeflate(b)});return h.apply(this,arguments)}g.createDeflate=a}),98);
__d("WAWebDownloadWebLogs",["Promise","WAWebCompression","WAWebFileSaver","WAWebFileSaverTypes","WAWebLoggerImpl","WAWebPrimaryVersion","WAWebToast.react","WAWebToastManager","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","gkx","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=1e6;function a(){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:"The download process has started. It might take longer for larger web log files."}));var a=new Date().toISOString().replace(/:/g,"-"),e="web_client_log_"+a;(h||(h=b("Promise"))).all([d("WAWebLoggerImpl").Logger.getLogs(),d("WAWebPrimaryVersion").getPrimaryCurrentVersion()]).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a[0];a=a[1];if(a!=null){a="Primary app version: "+a;e.unshift(a)}a="Web log for device : "+((a=(a=d("WAWebUserPrefsMeUser").getMe())==null?void 0:a.toString())!=null?a:"")+", lid : "+((a=(a=d("WAWebUserPrefsMeUser").getMaybeMeLid())==null?void 0:a.toString())!=null?a:"")+", time: "+new Date().toString();var f=(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb()),g;c("gkx")("26259")?g="Environment : INTERN "+(f?", AB Props : DEBUG (joined beta)":""):g="Environment : DEV "+(f?", AB Props : RELEASE (joined beta)":"");e.unshift(a,g);f=e.join("\n");return(h||(h=b("Promise"))).all([d("WAWebCompression").createDeflate(),f])});return function(b){return a.apply(this,arguments)}}()).then(function(a){var b=a[0];a=a[1];var c=new Blob([a],{type:"text/plain"});if(c.size>10*k){b.push(a,!0);a=new Blob([b.result()],{type:"application/zip"});return a}return c}).then(function(a){d("WAWebFileSaver").FileSaver.downloadData(a,a.type==="text/plain"?e:e+".txt",a.type==="text/plain"?d("WAWebFileSaverTypes").AllowedFileExtensions.TXT:d("WAWebFileSaverTypes").AllowedFileExtensions.ZIP)})}g.createDownloadDataForMdWebLogs=a}),98);
__d("WAWebBugnub.react",["WALogger","WAWebABProps","WAWebCheckBox.react","WAWebCmd","WAWebConfirmPopup.react","WAWebCurrentUser","WAWebDownloadWebLogs","WAWebFbtCommon","WAWebModalManager","WAWebOpenBugReportForm","WAWebSocketModel","WAWebUISpacing","asyncToGeneratorRuntime","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["In App Bug Reporting V2 Enabled: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bugnub: user selected reset web client, logging out"]);l=function(){return a};return a}var m=j||c("react"),n=(h||(h=d("react"))).useState,o={mdDogfoodingDownloadBtn:{color:"xbtce8p",backgroundColor:"x14v0smp",borderTopStartRadius:"x1npaq5j",borderTopEndRadius:"x1c83p5e",borderBottomEndRadius:"x1enjb0b",borderBottomStartRadius:"x199158v",$$css:!0}};function p(){var a=n(!1),e=a[0],f=a[1];if(!d("WAWebCurrentUser").isEmployee())return;a=function(){d("WAWebModalManager").ModalManager.close(),e&&(d("WALogger").LOG(l()),d("WAWebSocketModel").Socket.logout())};var g=m.jsx("div",{className:(i||(i=c("stylex")))(d("WAWebUISpacing").uiMargin.bottom16),children:m.jsxs("label",{children:[m.jsx(d("WAWebCheckBox.react").CheckBox,{checked:e,onChange:function(){f(!e)}})," ",m.jsx("span",{className:"x1f6kntn",children:"Also reset web client (this will log you out and clear storage)?"})]})}),h=m.jsx("div",{className:i(d("WAWebUISpacing").uiMargin.bottom16),children:m.jsx("button",{className:i(o.mdDogfoodingDownloadBtn,d("WAWebUISpacing").uiPadding.vert10,d("WAWebUISpacing").uiPadding.horiz24),onClick:d("WAWebDownloadWebLogs").createDownloadDataForMdWebLogs,children:"Download App Logs"})}),j=m.jsx("div",{className:i(d("WAWebUISpacing").uiMargin.bottom16),children:m.jsx("button",{className:i(o.mdDogfoodingDownloadBtn,d("WAWebUISpacing").uiPadding.vert10,d("WAWebUISpacing").uiPadding.horiz24),onClick:b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebOpenBugReportForm").openBugReportForm()}),children:"Bug Form"})});h=m.jsxs("div",{children:[m.jsxs("div",{className:i(d("WAWebUISpacing").uiMargin.bottom16),children:[m.jsx("p",{children:"Step 1"}),m.jsx("p",{children:"Download your app logs and save the file to your computer"})]}),h,m.jsxs("div",{className:i(d("WAWebUISpacing").uiMargin.bottom16),children:[m.jsx("p",{children:"Step 2"}),m.jsx("p",{children:"Open our pre-populated bug form"})]}),j,m.jsxs("div",{className:i(d("WAWebUISpacing").uiMargin.bottom16),children:[m.jsx("p",{children:"Step 3"}),m.jsx("p",{children:"Drag and drop your logs, screenshots, and/or video recordings in the attachment section of the form"})]}),m.jsxs("div",{className:i(d("WAWebUISpacing").uiMargin.bottom16),children:[m.jsx("p",{children:"Step 4"}),m.jsx("p",{children:"Click Submit"})]})]});return m.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{title:"Thank you for dogfooding WhatsApp! To submit a bug, please follow the steps below: ",okText:c("WAWebFbtCommon")("OK"),onOK:a,children:[h,g]})}p.displayName=p.name+" [from "+f.id+"]";var q=function(){var a=d("WAWebABProps").getABPropConfigValue("web_internal_in_app_bug_reporting_enable");d("WALogger").LOG(k(),a);if(a){d("WAWebCmd").Cmd.triggerBugReportV2();return}d("WAWebModalManager").ModalManager.open(m.jsx(p,{}))};function a(){q()}function e(){return m.jsx("div",{role:"button",className:"xixxii4 xn6xy2s xcoq3jd xds687c x42zw1d x1rg5ohu xm7lytj xsyo7zv xs9asl8 x1t2a60a x6prxxf x1pl83jw x178xt8z xso031l xy80clv xcfux6l x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x1nfbk4f x1jte9w8 xa93pmm xgkeump x1npaq5j x13lgxp2 x5pf9jr x199158v xpl7guj x1cdmr9m",onClick:q,"data-testid":void 0,children:m.jsx("span",{className:"x78zum5 xl56j7k",children:"\ud83d\udc1e"})})}e.displayName=e.name+" [from "+f.id+"]";f={Bugnub:e,openBugnubPopup:a};g["default"]=f}),98);
__d("WAWebBugnubScreenshotUpload.react",["invariant","WAWebBugReportSessionWamEvent","WAWebCircledPlusCustomIcon","WAWebClickable.react","WAWebCryptoCreateMediaKeys","WAWebFilePicker.react","WAWebMmsMediaTypes","WAWebMsgVideoIcon","WAWebNoop","WAWebSpinner.react","WAWebSvgComponentBase","WAWebUploadManager","WAWebWamEnumBugReportFlowAction","WAWebWamEnumUploadOriginType","WAWebXAltIcon","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useRef,m={iconColor:{color:"x1t495xr",$$css:!0}},n=["image/vnd.adobe.photoshop","image/gif","image/jpeg","image/pipeg","image/png","image/svg+xml"];e=["video/mp4","video/3gpp","video/quicktime"];var o=[n,e].join(",");function a(a){var e=a.mediaState,f=a.onChangeState,g=function(a){new(d("WAWebBugReportSessionWamEvent").BugReportSessionWamEvent)({bugReportFlowAction:a}).commit()},i=l(null),j=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=n.includes(a.type)?"image":"video";f({state:"uploading",mediaInfo:null});var e=(yield c("WAWebUploadManager").encryptAndUpload({blob:a,mediaKey:null,mediaKeyTimestamp:null,type:b,signal:new AbortController().signal,userUploadAttemptCount:0,forwardedFromWeb:!1,uploadOrigin:d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.UNKNOWN,isViewOnce:!1})),h=(yield c("WAWebCryptoCreateMediaKeys")(b,e.mediaKey));g(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.MEDIA_UPLOAD_SUCCESSFUL);f({state:"success",mediaInfo:{url:e.url,iv:h.iv,encKey:h.encKey,previewUrl:URL.createObjectURL(a),filename:a.name,mediaType:b}})});return function(b){return a.apply(this,arguments)}}();a=function(a){if(a==null)return;a=a.target.files[0];void j(a).then(c("WAWebNoop"))};var p=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){g(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.ADD_SCREENSHOT_CLICK);var a=i.current;if(a==null)return;a.open()});return function(){return a.apply(this,arguments)}}(),q=null;switch(e.state){case"uploading":q=k.jsxs(d("WAWebClickable.react").Clickable,{className:"x1hvvfs5 x1n2onr6 xrmyp2 x1njnjl6 xdt5ytf x78zum5 xl56j7k x6s0dn4",onClick:p,children:[k.jsx(d("WAWebSpinner.react").Spinner,{size:36,color:"wdsSecondaryLighter"}),k.jsx("div",{className:"x1pg5gke xk50ysn xi81zsa",children:"Uploading"}),k.jsx(c("WAWebFilePicker.react"),{ref:i,mimes:o,onChange:a,multiple:!1})]});break;case"error":q=k.jsxs(d("WAWebClickable.react").Clickable,{className:"x1hvvfs5 x1n2onr6 xrmyp2 x1njnjl6 xdt5ytf x78zum5 xl56j7k x6s0dn4",onClick:p,children:[k.jsx(d("WAWebCircledPlusCustomIcon").CircledPlusCustomIcon,{height:36,width:36,wrapperStyles:m.iconColor}),k.jsx("div",{className:"x1pg5gke xk50ysn xi81zsa",children:"Error uploading file."}),k.jsx(c("WAWebFilePicker.react"),{ref:i,mimes:o,onChange:a,multiple:!1})]});break;case"success":e.mediaInfo!=null||h(0,72701);if(e.mediaInfo.mediaType===d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO){var r;q=k.jsxs("div",{className:"x1hvvfs5 x1n2onr6 xrmyp2 x1njnjl6 xdt5ytf x78zum5 xl56j7k x6s0dn4",children:[k.jsx(d("WAWebMsgVideoIcon").MsgVideoIcon,{height:36,width:36,color:d("WAWebSvgComponentBase").SvgColorProp.GRAY}),(r=e.mediaInfo)==null?void 0:r.filename,k.jsx("button",{className:"x10l6tqk xnfr1j xgmwauy x7o08j2",onClick:function(){g(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.REMOVE_SCREENSHOT_CLICK),f({state:"none",mediaInfo:null})},children:k.jsx(d("WAWebXAltIcon").XAltIcon,{})})]})}else q=k.jsx("div",{style:{backgroundImage:"url("+e.mediaInfo.previewUrl+")"},className:"x1n2onr6 xrmyp2 x1njnjl6 x1oreiyq x1vwr25l x18d0r48 x1e7nkc8",children:k.jsx("button",{className:"x10l6tqk xnfr1j xgmwauy x7o08j2",onClick:function(){f({state:"none",mediaInfo:null})},children:k.jsx(d("WAWebXAltIcon").XAltIcon,{})})});break;default:case"none":q=k.jsxs(d("WAWebClickable.react").Clickable,{className:"x1hvvfs5 x1n2onr6 xrmyp2 x1njnjl6 xdt5ytf x78zum5 xl56j7k x6s0dn4",onClick:p,children:[k.jsx(d("WAWebCircledPlusCustomIcon").CircledPlusCustomIcon,{height:36,width:36,wrapperStyles:m.iconColor}),k.jsx(c("WAWebFilePicker.react"),{ref:i,mimes:o,onChange:a,multiple:!1})]});break}return q}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebGetBugReportingCategories",[],(function(a,b,c,d,e,f){function a(){var a=["business","messaging","channels","rich_messaging","data_management","calling","sharing","new_devices","privacy","growth_broadcast","integrity","cross_app_integrations","ui_redesign","whatsapp_vr","whatsapp_ai_agents","infra","support_experience","platforms_delivery","other"];return a.map(function(a){return babelHelpers["extends"]({id:a},g(a))})}function g(a){switch(a){case"business":return{title:"Business",subtitle:"Shopping, Directory, SMB Premium, 3P Extensions Beta, Payments, etc"};case"business_search":return{title:"Business Search",subtitle:""};case"calling":return{title:"Calling (VoIP)",subtitle:"Call Quality, Audio/Video Calling, Desktop Calling, Screen Sharing, Group Calls"};case"channels":return{title:"Channels",subtitle:"Any channels related bugs/issues"};case"cross_app_integrations":return{title:"Cross-app Integrations (X-family)",subtitle:"WAFFLE, Account Settings, Account Center"};case"data_management":return{title:"Data Management",subtitle:"Backup, Restore, Cross Platform Migration"};case"growth_broadcast":return{title:"Growth & Broadcast",subtitle:"Status, Account Access, Account Linking, Growth"};case"infra":return{title:"Infra",subtitle:"Infrastructure, internal systems"};case"integrity":return{title:"Integrity",subtitle:"Account Defense"};case"messaging":return{title:"Messaging",subtitle:"Communities, 1:1 Chats, Group Chats"};case"new_devices":return{title:"New Devices (CEP)",subtitle:"Mac Catalyst, iPad, Windows, Android Companions, Web, Avatars, Wear OS"};case"other":return{title:"Other/I'm not sure",subtitle:"Features/bugs you're not sure about"};case"privacy":return{title:"Privacy",subtitle:"Privacy Issues/Settings, Account & Identity, Ephemerality, In-App Comms, Phone Number Hiding, Online Presence"};case"rich_messaging":return{title:"Rich Messaging",subtitle:"Voice Messages (PTT), Video Messages (PTV), Location Messages, Polls, Contacts, Attachment Menu, Chat/Group Info"};case"sharing":return{title:"Media (Sharing)",subtitle:"Camera, Photos, Videos, Files, PDFs, Docs"};case"ui_redesign":return{title:"UI Redesign (WDS)",subtitle:"WhatsApp Design System (WDS) - UI bugs, design issues, etc"};case"whatsapp_ai_agents":return{title:"WhatsApp AI",subtitle:"AI Chatbot, AI stickers"};case"whatsapp_vr":return{title:"WhatsApp VR",subtitle:"WhatsApp on Quest Devices"};case"platforms_delivery":return{title:"Platforms & Delivery",subtitle:"Any performance issue - crashing app, slow app, slow scrolling, battery life"};case"support_experience":return{title:"Support Experience (SXP)",subtitle:"WhatsApp Support Channel, Support Chat Bot, Help Center"}}}f.getBugReportingCategories=a}),66);
__d("WAWebBugnubV2Popup.react",["invariant","WASmaxBugReportingReportBugRPC","WAWebActionCheckCircleIcon","WAWebActionMenuItem.react","WAWebBugReportSessionWamEvent","WAWebBugnubScreenshotUpload.react","WAWebChevronIcon","WAWebClickableLink.react","WAWebCmd","WAWebConfirmPopup.react","WAWebCrashlog","WAWebCurrentUser","WAWebDownloadWebLogs","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebGetBugReportingCategories","WAWebLoggerDebugInfo","WAWebMmsMediaTypes","WAWebModalManager","WAWebNavBarTypes","WAWebOpenBugReportForm","WAWebRichTextField.react","WAWebUISpacing","WAWebWDSButton","WAWebWDSMenu.react","WAWebWDSText.react","WAWebWamEnumBugReportFlowAction","asyncToGeneratorRuntime","react","useWAWebPrevious"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useState;function n(a){a=a.prefilledDescription;l(function(){t(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.BUG_REPORT_FORM_IMPRESSION)},[]);a=m((a=a)!=null?a:"");var e=a[0],f=a[1];a=m("");var g=a[0],i=a[1];a=m(null);var j=a[0],n=a[1];a=m({type:"clean"});var o=a[0],p=a[1],q=c("useWAWebPrevious")(o);a=m(new Array(3).fill({state:"none",mediaInfo:null}));var r=a[0],s=a[1];if(!d("WAWebCurrentUser").isEmployee())return;var t=function(a){new(d("WAWebBugReportSessionWamEvent").BugReportSessionWamEvent)({bugReportFlowAction:a}).commit()},u=function(a){a=a.trim().replace(/(^[Lp\{\}][Np\{\}][Pp\{\}][Zp\{\}])/g,"");return a.length>10};a=function(a){a=a.text;a.length===0?p({type:"clean"}):!u(a)&&o.type==="descriptionError"?p({type:"descriptionError"}):p({type:"dirty"});f(a)};var v=function(a){a=new Uint8Array(a);return btoa(String.fromCharCode.apply(null,a))},w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){t(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.SUBMIT_CLICK);if(!u(e)){p({type:"descriptionError"});return}p({type:"uploading"});var a=JSON.stringify(yield d("WAWebLoggerDebugInfo").getDebugInfo({supportTag:"InAppBugReporting",convertFields:!0,addUserAgentDetails:!0}),null,2),b=(yield d("WAWebCrashlog").upload({reason:d("WAWebCrashlog").USER_REPORT,immediate:!1,isHighPri:!0,logType:d("WAWebCrashlog").LogType.SUPPORT}));b==null?t(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.DEVICE_LOG_UPLOAD_FAILED):t(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.DEVICE_LOG_UPLOAD_SUCCESSFUL);var c=r.filter(function(a){return a.state==="success"}).map(function(a){a=a.mediaInfo;a!=null||h(0,72701);return{mediaCipherKey:v(a.encKey),mediaElementValue:a.url,mediaIv:v(a.iv),mediaType:a.mediaType===d("WAWebMmsMediaTypes").MEDIA_TYPES.VIDEO?"video":"image"}});a=(yield d("WASmaxBugReportingReportBugRPC").sendReportBugRPC({descriptionElementValue:e,debugInformationJsonElementValue:a,deviceLogHandleArgs:b!=null?{deviceLogHandleElementValue:b}:void 0,mediaArgs:c,titleArgs:g?{titleElementValue:g}:void 0,categoryArgs:j?{categoryElementValue:j}:void 0}));switch(a.name){case"ReportBugResponseSuccess":new(d("WAWebBugReportSessionWamEvent").BugReportSessionWamEvent)({bugReportFlowAction:d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.SUBMISSION_SUCCESSFUL,bugReportMediaCount:c.length,submitBugCategory:j==null?void 0:j.toString(),submitBugContainsTitle:g!=null&&g.length>0}).commit();p({type:"success",taskId:a.value.taskIdElementValue});break;case"ReportBugResponseError":default:new(d("WAWebBugReportSessionWamEvent").BugReportSessionWamEvent)({bugReportFlowAction:d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.SUBMISSION_FAILED,bugReportMediaCount:c.length,submitBugCategory:j==null?void 0:j.toString(),submitBugContainsTitle:g!=null&&g.length>0}).commit();p({type:"uploadError"});break}});return function(){return a.apply(this,arguments)}}(),x=d("WAWebGetBugReportingCategories").getBugReportingCategories();if(o.type==="chooseCategory")return k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{testid:void 0,title:"Choose Category",cancelText:"Back",onCancel:function(){var a;p((a=q)!=null?a:{type:"clean"})},children:k.jsxs(d("WAWebWDSMenu.react").WDSMenu,{maxHeight:400,children:[x.map(function(a){return k.jsx(d("WAWebActionMenuItem.react").ActionMenuItem,{optionId:a.id,primary:a.title,secondary:a.subtitle,onSelect:function(){var b;n(a.id);p((b=q)!=null?b:{type:"clean"})}},a.id)}),k.jsx(d("WAWebActionMenuItem.react").ActionMenuItem,{optionId:"none",primary:"None",onSelect:function(){var a;n(null);p((a=q)!=null?a:{type:"clean"})}},"none")]})});if(o.type==="success"){new(d("WAWebBugReportSessionWamEvent").BugReportSessionWamEvent)({bugReportFlowAction:d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.SUCCESS_VIEW_IMPRESSION,bugReportTaskId:o.taskId}).commit();var y=o.taskId.match(/Bug ID: (.*)/),z;y!=null?z=k.jsxs(d("WAWebFlex.react").FlexItem,{testid:void 0,children:["Thank you for helping improve WhatsApp. A bug was created automatically for this bug report:",k.jsxs(c("WAWebClickableLink.react"),{testid:void 0,onClick:function(){d("WAWebExternalLink.react").openExternalLink("https://www.internalfb.com/bug/"+y[1])},children:[" ",y[1]]}),"."]}):z=k.jsxs(d("WAWebFlex.react").FlexItem,{testid:void 0,children:["Thank you for helping improve WhatsApp. A task was created automatically for this bug report:",k.jsxs(c("WAWebClickableLink.react"),{testid:void 0,onClick:function(){d("WAWebExternalLink.react").openExternalLink("https://internalfb.com/tasks/?t="+o.taskId)},children:[" ","T",o.taskId]}),"."]});return k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{testid:void 0,title:"Bug submitted successfully!",okText:"OK",onOK:function(){d("WAWebModalManager").ModalManager.close(),d("WAWebCmd").Cmd.setActiveNavBarItem(d("WAWebNavBarTypes").NavBarItems.Chats)},children:k.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",children:[k.jsx(d("WAWebActionCheckCircleIcon").ActionCheckCircleIcon,{height:84,xstyle:d("WAWebUISpacing").uiMargin.bottom12}),z]})})}return k.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{testid:void 0,title:"Report a bug",okText:"Submit",onOK:w,onCancel:function(){t(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.CANCEL_CLICK),d("WAWebModalManager").ModalManager.close(),d("WAWebCmd").Cmd.setActiveNavBarItem(d("WAWebNavBarTypes").NavBarItems.Chats)},okDisabled:o.type==="uploading"||o.type==="clean",okSpinner:o.type==="uploading",children:[k.jsx(d("WAWebRichTextField.react").RichTextField,{error:o.type==="descriptionError"?"Describe the bug further":void 0,maxLength:2e3,maxVisibleLines:7,onChange:a,placeholder:"Tell us what went wrong",value:e}),k.jsx(d("WAWebWDSText.react").WDSTextSmall,{marginTop:20,children:"Screenshots"}),k.jsx(d("WAWebFlex.react").FlexRow,{justify:"all",marginTop:8,children:r.map(function(a,b){return k.jsx(c("WAWebBugnubScreenshotUpload.react"),{mediaState:a,onChangeState:function(a){s([].concat(r.slice(0,b),[a],r.slice(b+1)))}},b)})}),k.jsx(d("WAWebRichTextField.react").RichTextField,{maxLength:200,onChange:function(a){a=a.text;i(a)},placeholder:"Title (optional)",value:g}),k.jsxs(d("WAWebWDSButton").WDSButtonSecondary,{stretch:!0,onClick:function(){t(d("WAWebWamEnumBugReportFlowAction").BUG_REPORT_FLOW_ACTION.SUBMIT_BUG_CATEGORY_CLICK),p({type:"chooseCategory"})},children:[k.jsx(d("WAWebFlex.react").FlexItem,{grow:1,justify:"start",children:(w=(z=x.find(function(a){return a.id===j}))==null?void 0:z.title)!=null?w:"Bug Category (optional)"}),k.jsx(d("WAWebChevronIcon").ChevronIcon,{xstyle:d("WAWebUISpacing").uiPadding.start8})]}),k.jsxs(d("WAWebWDSText.react").WDSTextSmall,{marginTop:20,children:[k.jsx(c("WAWebClickableLink.react"),{onClick:b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebOpenBugReportForm").openBugReportForm()}),children:"Open Butterfly Form"})," ","|"," ",k.jsx(c("WAWebClickableLink.react"),{onClick:d("WAWebDownloadWebLogs").createDownloadDataForMdWebLogs,children:"Download Logs"})]}),k.jsxs(d("WAWebWDSText.react").WDSTextSmall,{marginTop:24,children:["By submitting, you allow any employee to access your device logs, phone number, and debug info, and include them in the task."," ",k.jsx(c("WAWebClickableLink.react"),{onClick:function(){d("WAWebExternalLink.react").openExternalLink(d("WAWebFaqUrl").getSupportChatFaqUrl())},children:"Learn more"})]}),o.type==="uploadError"&&k.jsx(d("WAWebWDSText.react").WDSTextSmall,{marginTop:24,color:"critical",children:"Something went wrong while submitting. Please try again."})]})}n.displayName=n.name+" [from "+f.id+"]";function a(a){d("WAWebModalManager").ModalManager.open(k.jsx(n,{prefilledDescription:a}))}g.openBugNubV2Popup=a}),98);